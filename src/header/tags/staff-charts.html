<staff-charts>
  <div class="chartcont" style="width:1050px;height:400px;"></div>
  <script>
    
    import echarts from 'echarts'
    import {staffcharts} from '../../js/def/graph_def.js'

    this.on('mount', () => {
      this.initData()
    })

    this.initCharts = (num) => {
      if (this.chartsData) {
        this.numtype = num
        let initdom = this.root.querySelector('.chartcont')
        initdom && echarts.dispose(initdom)
        let staffCharts = echarts.init(initdom)
        let chartsMsg = {
          record: this.chartsData.recordtime,
          data: this.chartsData[num]
        }
        let option = staffcharts(chartsMsg)
        staffCharts.setOption(option)
      }
    }

    this.initData = (msg) => { 
      this.chartsData = this.opts.parentag.staffdata
      this.numtype = this.opts.parentag.type
      this.chartsData && this.initCharts(this.numtype)
    }

    this.changeCharts = (type) => {
      if (this.numtype !== type) {
        this.initCharts(type)
      }
    }

  </script>
</staff-charts>